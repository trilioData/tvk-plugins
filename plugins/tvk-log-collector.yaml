apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: tvk-log-collector
spec:
  homepage: https://github.com/trilioData/tvk-plugins/blob/master/docs/log-collector/README.md
  shortDescription: TVK Log-Collector to collect logs of TVK Resources
  version: v1.3.4
  caveats: |
    Curl and Git neeed to be installed on system for Krew index update to work properly
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_linux_amd64.tar.gz
    sha256: 54e5e8bbb3b0fa4371ad68be2d8ebb77a7a69bd190789dee94425a1083289ef5
    bin: log-collector
    files:
    - from: '*'
      to: .
  - selector:
      matchLabels:
        os: linux
        arch: ppc64le
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_linux_ppc64le.tar.gz
    sha256: 18e4f1735cc1e2164d49910e111b6ae8f03e022a658d76441516431aaa4659d8
    bin: log-collector
    files:
      - from: '*'
        to: .
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_linux_arm64.tar.gz
    sha256: 8660db662a08e4ddfe6b344c9e4459fffb862e64c0e2d48e94739cc17e57d090
    bin: log-collector
    files:
    - from: '*'
      to: .
  - selector:
      matchLabels:
        os: linux
        arch: arm
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_linux_arm.tar.gz
    sha256: d6607b6df552bf1082720600d32c894ab0565dab502b7bc4283f66de5a88a2d5
    bin: log-collector
    files:
    - from: '*'
      to: .

  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_darwin_amd64.tar.gz
    sha256: a81ed980e5dcc6db0a05cc0bab35d53a05b7d6d88956edf4ad71322bb994a271
    bin: log-collector
    files:
    - from: '*'
      to: .
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_darwin_arm64.tar.gz
    sha256: d302374e47ba127a8c4308aab5894f007691a2604398724b96fd53e46f736bd9
    bin: log-collector
    files:
    - from: '*'
      to: .

  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/trilioData/tvk-plugins/releases/download/v1.3.4/log-collector_v1.3.4_windows_amd64.zip
    sha256: d0c52581e8cc2e650bf3dc81bbf82fbbcaf23d875f1bc21860d546533ce2fdb8
    bin: log-collector.exe
    files:
    - from: '*'
      to: .

  description: |
    tvk-log-collector is a kubectl plugin which collects the information mainly yaml configuration and logs from k8s cluster for
    debugging TVK application.

    This plugin will generate triliovault-<date-time>.zip file containing cluster debugging information.

    > Check available flags for tvk-log-collector plugin with :-
    kubectl tvk-log-collector --help

    Parameter   	Default     	Description
    --namespaces 	[]          	list of namespaces to look for resources
    --kube_config 	~/.kube/config 	path to the kubernetes config
    --keep-source-folder 	    false 	        Keep source directory and Zip both
    --log-level 	INFO 	        log level for debugging

    > Usage :-

    kubectl tvk-log-collector --log-level INFO --kubeconfig /home/usr/kubeconfig
